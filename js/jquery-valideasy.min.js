(function(e,t,n){function u(t,n){this.$form=e(t);this.defaults={mode:"single",errorElementId:"errors",disableFieldStyle:false,stepByStep:false,singleFieldValidation:false,scrollToFirstError:false,onValidateBefore:function(e,t){return},onValidateAfter:function(e,t,n){return}};this.opts=e.extend(this.defaults,n);this.$form.data(r,this);this.formHasError=false;this.activeErrorElements=new Array}function a(e,t){this.$el=e;this.valideasy=t;this.$form=t.$form;this.opts=t.opts;this.defaultValue=this.$el.attr("title");this.value=this.$el.val();this.errorElement=this.getErrorElement();this.method=""}function f(e){if(e){e.replace(".","");e.replace(",","");e.replace(" ","")}return e}var r="valideasy";var i=["required","grouprequired","integer","number","email","url","zip","phone","lowerthan","greaterthan","passwordcheck"];var s={integer:/^\d+$/,date:/^((0?\d)|(1[012]))[\/-]([012]?\d|30|31)[\/-]\d{1,4}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,usd:/^\$?((\d{1,3}(,\d{3})*)|\d+)(\.(\d{2})?)?$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^(?=.*\d)(?:[\d \.,]+)$/,zip:/^\d{5}(-\d{4})?$/,phone:/^((0[0-9]{1})([\-\. ]?))((([0-9]{2})\3){3}([0-9]{2}))$/,guid:/^(\{?([0-9a-fA-F]){8}-(([0-9a-fA-F]){4}-){3}([0-9a-fA-F]){12}\}?)$/,time12:/^((0?\d)|(1[012])):[0-5]\d?\s?[aApP]\.?[mM]\.?$/,time24:/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/,nonHtml:/^[^<>]*$/};var o={required:"The field {field} is required.",grouprequired:"At least one field required.",integer:"The field {field} must be numeric.",number:"The field {field} must be numeric.",email:"Invalid email adress",url:"Invalid URL.",phone:"Invalid phone number.",lowerthan:"{field1} must be lower than {field2}.",greaterthan:"{field1} must be greater than {field2}.",zip:"Invalid postcode.",passwordcheck:"Passwords must be identical."};u.prototype.init=function(){this.setParams();var t=this;this.opts.onValidateBefore(this.$form,this.opts);if(this.opts.singleFieldValidation==false){this.$form.find("input:not([type=submit]), select, textarea").each(function(){var n=new a(e(this),t);if(!(t.opts.stepByStep&&t.formHasError)){if(!n.validate()){t.formHasError=true}}})}else{var n=new a(t.$form,t);if(!n.validate()){t.formHasError=true}}this.opts.onValidateAfter(this.$form,this.opts,!this.formHasError);if(this.formHasError&&this.opts.scrollToFirstError){e("html,body").animate({scrollTop:this.$form.find(".error-wrapper:visible").first().parents().first().offset().top},"slow")}return this};u.prototype.setParams=function(){if(this.$form.attr("data-valideasy-mode")){this.opts.mode=this.$form.attr("data-valideasy-mode")}if(this.$form.attr("data-valideasy-errorelementid")){this.opts.errorElementId=this.$form.attr("data-valideasy-errorelementid")}if(this.$form.attr("data-valideasy-disablefieldstyle")){this.opts.disableFieldStyle=this.$form.attr("data-valideasy-disablefieldstyle")}if(this.$form.attr("data-valideasy-stepbystep")){this.opts.stepByStep=this.$form.attr("data-valideasy-stepbystep")}if(this.$form.attr("data-valideasy-scrolltofirsterror")){this.opts.scrollToFirstError=this.$form.attr("data-valideasy-scrolltofirsterror")}if(this.$form.attr("data-valideasy-singlefieldvalidation")){this.opts.singleFieldValidation=this.$form.attr("data-valideasy-singlefieldvalidation")}return this};u.prototype.isValid=function(){return!this.formHasError};a.prototype.getErrorElement=function(){if(this.$el.attr("data-error-fieldid")){errorElement=e("#"+this.$el.attr("data-error-fieldid"))}else{if(this.opts.mode=="single"){errorElement=e("#"+this.$el.attr("id")+"_"+this.opts.errorElementId)}else{errorElement=e("#"+this.opts.errorElementId)}}return errorElement};a.prototype.validate=function(){var t=true;for(var n in i){this.method=i[n];if(this.$el.hasClass(this.method)){if(this.method=="required"){t=this.$el.val()==""||this.$el.val()==this.defaultValue||this.$el.find("option:selected").text()==this.defaultValue||this.$el.attr("type")=="checkbox"&&!this.$el.is(":checked")}else if(this.method=="lowerthan"||this.method=="greaterthan"){var r=e("#"+this.$el.attr("data-error-"+this.method));var o=parseInt(f(r.val()));this.value=parseInt(f(this.value));if(r&&s["number"].test(o+this.value)&&this.value!=this.defaultValue){if(this.method=="lowerthan"){t=this.value>o}else{t=this.value<o}}else{t=false}}else if(this.method=="passwordcheck"){var r=e("#"+this.$el.attr("data-error-"+this.method));var o=r.val();if(r&&this.value!=this.defaultValue){t=!(this.value==o)}else{t=false}}else if(this.method=="grouprequired"){var u=e('[data-error-grouprequired="'+this.$el.attr("data-error-grouprequired")+'"]');u.each(function(){if(!(e(this).val()==""||e(this).val()==e(this).attr("title")==true)){t=false;return}})}else{pattern=s[this.method];t=!pattern.test(this.value)&&this.value!=this.defaultValue&&this.value!=""}if(t){if(jQuery.inArray(this.errorElement,this.valideasy.activeErrorElements)<=-1){this.setError();this.valideasy.activeErrorElements.push(this.errorElement.attr("id"))}return false}else{if(jQuery.inArray(this.errorElement.attr("id"),this.valideasy.activeErrorElements)<=-1){this.unsetError()}}}}return true};a.prototype.setError=function(){var e=this;this.displayErrorMessage();if(!this.opts.disableFieldStyle){this.$el.addClass("error")}this.$el.bind("focus change",function(){e.unsetError()})};a.prototype.unsetError=function(){var e=this.errorElement.attr("data-error-relatedfields");if(e){e=e.replace(" "+this.$el.attr("id"),"");this.errorElement.attr("data-error-relatedfields",e)}if(!e||e==""){this.errorElement.fadeOut();this.errorElement.html("")}if(!this.opts.disableFieldStyle){this.$el.removeClass("error")}};a.prototype.displayErrorMessage=function(){if(this.$el.attr("data-error-fieldname")){elementName=this.$el.attr("data-error-fieldname")}else{elementName=this.$el.attr("title")}if(this.$el.attr("data-error-message-"+this.method)){message=this.$el.attr("data-error-message-"+this.method)}else{message=o[this.method];if(this.method=="lowerthan"||this.method=="greaterthan"){targetElement=e("#"+this.$el.attr("data-error-"+this.method));message=message.replace("{field1}","<span class='fieldname'>"+elementName+"</span>");message=message.replace("{field2}","<span class='fieldname'>"+targetElement.attr("title")+"</span>")}else{message=message.replace("{field}","<span class='fieldname'>"+elementName+"</span>")}}relatedFields=this.errorElement.attr("data-error-relatedfields")!=undefined?this.errorElement.attr("data-error-relatedfields"):"";this.errorElement.attr("data-error-relatedfields",relatedFields+" "+this.$el.attr("id"));if(this.errorElement.html()==""){this.errorElement.fadeIn();this.errorElement.html(message)}};e.fn.valideasy=function(e){var t=new u(this,e);t.init();return t.isValid()}})(jQuery,document,window)